<?xml version="1.0" encoding="utf-8"?>
<Server port="8005" shutdown="SHUTDOWN">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <Service name="Catalina">

    <Connector port="8080" maxThreads="150" minSpareThreads="25" connectionTimeout="20000"
      URIEncoding="UTF-8" enableLookups="false" maxHttpHeaderSize="8192" protocol="HTTP/1.1"
      useBodyEncodingForURI="true" redirectPort="8443" acceptCount="100" disableUploadTimeout="true" />

    <!--
        ====================================================================================

        To run JIRA via HTTPS:

             * Uncomment the Connector below
             * Execute:
                 %JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA (Windows)
                 $JAVA_HOME/bin/keytool -genkey -alias tomcat -keyalg RSA  (Unix)
               with a password value of "changeit" for both the certificate and the keystore itself.
             * If you are on JDK1.3 or earlier, download and install JSSE 1.0.2 or later, and put the JAR files into
               "$JAVA_HOME/jre/lib/ext"
             * Restart and visit https://localhost:8443/

             For more info, see :

              http://confluence.atlassian.com/display/JIRA/Running+JIRA+over+SSL+or+HTTPS

              and

              http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html

        ====================================================================================
        -->
    <!--
            <Connector port="8443" protocol="org.apache.coyote.http11.Http11Protocol"
              maxHttpHeaderSize="8192" SSLEnabled="true"
              maxThreads="150" minSpareThreads="25"
              enableLookups="false" disableUploadTimeout="true"
              acceptCount="100" scheme="https" secure="true"
              clientAuth="false" sslProtocol="TLS" useBodyEncodingForURI="true"/>
        -->

    <Engine name="Catalina" defaultHost="localhost">
      <Host name="localhost" appBase="webapps" unpackWARs="true" autoDeploy="true">
        <Context path="/jira" reloadable="false" useHttpOnly="true">
          <Resource name="UserTransaction" auth="Container" type="javax.transaction.UserTransaction"
            factory="org.objectweb.jotm.UserTransactionFactory" jotm.timeout="60" />
          <Manager pathname="" />
        </Context>

      </Host>

      <Valve className="org.apache.catalina.valves.AccessLogValve" resolveHosts="false"
        pattern="%a %{jira.request.id}r %{jira.request.username}r %t &quot;%m %U%q %H&quot; %s %b %D &quot;%{Referer}i&quot; &quot;%{User-Agent}i&quot; &quot;%{jira.request.assession.id}r&quot;" />

    </Engine>
  </Service>
</Server>
